# =============================================================================
# Spring Boot Application 설정 파일
# =============================================================================
# YAML 형식으로 작성되며, 들여쓰기(2칸)가 중요합니다.
# 계층 구조: spring.datasource.url 은 spring: datasource: url: 로 표현

server:
  port: 8080

spring:
  application:
    name: payment-processor

  # ==========================================================================
  # 데이터소스 설정 (Database Connection)
  # ==========================================================================
  # [DataSource란?]
  # - 데이터베이스 연결을 관리하는 객체입니다
  # - Connection Pool을 통해 효율적으로 DB 연결을 관리합니다
  datasource:
    # H2 인메모리 데이터베이스 URL
    # - jdbc:h2:mem:paymentdb → 메모리에 paymentdb라는 DB 생성
    # - 애플리케이션 종료 시 데이터가 사라집니다
    # - 파일 기반으로 하려면: jdbc:h2:file:./data/paymentdb
    url: jdbc:h2:mem:paymentdb

    # H2 데이터베이스 드라이버 클래스
    driver-class-name: org.h2.Driver

    # DB 접속 계정 (H2 기본값)
    username: sa
    password:

  # ==========================================================================
  # H2 콘솔 설정
  # ==========================================================================
  # [H2 Console이란?]
  # - 웹 브라우저에서 H2 데이터베이스를 조회/관리할 수 있는 도구
  # - 개발 시 데이터 확인에 매우 유용합니다
  # - 접속 URL: http://localhost:8080/h2-console
  h2:
    console:
      enabled: true           # H2 콘솔 활성화
      path: /h2-console       # 콘솔 접속 경로

  # ==========================================================================
  # JPA 설정
  # ==========================================================================
  # [JPA (Java Persistence API)란?]
  # - 자바 ORM(Object-Relational Mapping) 표준 명세입니다
  # - 객체와 관계형 데이터베이스 테이블을 매핑합니다
  # - Hibernate가 JPA의 대표적인 구현체입니다
  jpa:
    # DDL 자동 생성 옵션
    # - create: 매번 테이블 삭제 후 생성
    # - create-drop: 시작 시 생성, 종료 시 삭제
    # - update: 변경된 부분만 반영 (운영에서 주의!)
    # - validate: 엔티티와 테이블 매핑 검증만
    # - none: 아무것도 안함
    hibernate:
      ddl-auto: create-drop

    # SQL 로그 출력 여부
    show-sql: true

    # SQL 포맷팅 (가독성 향상)
    properties:
      hibernate:
        format_sql: true

    # 지연 로딩 시 세션 없음 예외 방지 (개발 편의용)
    open-in-view: false

logging:
  level:
    com.example.payment: DEBUG
    # SQL 바인딩 파라미터 출력 (? 자리에 들어가는 값)
    org.hibernate.orm.jdbc.bind: TRACE

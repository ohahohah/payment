### =====================================================
### Payment Processor REST API Test
### =====================================================
### 사용법:
### - IntelliJ IDEA: 각 요청 옆의 ▶ 버튼 클릭
### - VS Code: REST Client 확장 설치 후 "Send Request" 클릭
### - 서버 실행: ./gradlew bootRun
### =====================================================

@baseUrl = http://localhost:8080/api/payments

### -----------------------------------------------------
### 1. 결제 생성 (POST)
### -----------------------------------------------------

### 1-1. VIP 고객 결제 (한국)
POST {{baseUrl}}
Content-Type: application/json

{
  "originalPrice": 100000,
  "country": "KR",
  "isVip": true
}

### 1-2. 일반 고객 결제 (한국)
POST {{baseUrl}}
Content-Type: application/json

{
  "originalPrice": 50000,
  "country": "KR",
  "isVip": false
}

### 1-3. VIP 고객 결제 (미국)
POST {{baseUrl}}
Content-Type: application/json

{
  "originalPrice": 200000,
  "country": "US",
  "isVip": true
}

### 1-4. 일반 고객 결제 (미국)
POST {{baseUrl}}
Content-Type: application/json

{
  "originalPrice": 75000,
  "country": "US",
  "isVip": false
}

### -----------------------------------------------------
### 2. 결제 조회 (GET)
### -----------------------------------------------------

### 2-1. 전체 결제 목록 조회
GET {{baseUrl}}

### 2-2. 결제 단건 조회 (ID: 1)
GET {{baseUrl}}/1

### 2-3. 결제 단건 조회 (ID: 2)
GET {{baseUrl}}/2

### -----------------------------------------------------
### 3. 상태별 결제 조회 (GET)
### -----------------------------------------------------

### 3-1. 완료된 결제 조회
GET {{baseUrl}}/status?status=COMPLETED

### 3-2. 환불된 결제 조회
GET {{baseUrl}}/status?status=REFUNDED

### 3-3. 대기중 결제 조회
GET {{baseUrl}}/status?status=PENDING

### -----------------------------------------------------
### 4. 최근 결제 조회 (GET)
### -----------------------------------------------------

### 4-1. 최근 결제 5건 조회
GET {{baseUrl}}/recent?limit=5

### 4-2. 최근 결제 10건 조회 (기본값)
GET {{baseUrl}}/recent

### 4-3. 최근 결제 3건 조회
GET {{baseUrl}}/recent?limit=3

### -----------------------------------------------------
### 5. 결제 환불 (PATCH)
### -----------------------------------------------------

### 5-1. 결제 환불 (ID: 1)
PATCH {{baseUrl}}/1/refund

### 5-2. 결제 환불 (ID: 2)
PATCH {{baseUrl}}/2/refund

### -----------------------------------------------------
### 6. 에러 케이스 테스트
### -----------------------------------------------------

### 6-1. 존재하지 않는 결제 조회 (404 예상)
GET {{baseUrl}}/9999

### 6-2. 존재하지 않는 결제 환불 (400 예상)
PATCH {{baseUrl}}/9999/refund

### 6-3. 잘못된 상태값으로 조회 (400 예상)
GET {{baseUrl}}/status?status=INVALID

### =====================================================
### 시나리오 테스트 (순서대로 실행)
### =====================================================

### [시나리오] 결제 생성 → 조회 → 환불 → 재조회

### Step 1: 결제 생성
# POST {{baseUrl}}
# Content-Type: application/json
#
# {
#   "originalPrice": 150000,
#   "country": "KR",
#   "isVip": true
# }

### Step 2: 생성된 결제 조회 (위 응답에서 받은 ID 사용)
# GET {{baseUrl}}/1

### Step 3: 결제 환불
# PATCH {{baseUrl}}/1/refund

### Step 4: 환불 후 상태 확인
# GET {{baseUrl}}/1
